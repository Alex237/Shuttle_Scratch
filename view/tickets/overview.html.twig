{% extends "layout.html.twig" %}
{% block title %}Gestion des tickes{% endblock %}
{% set navtab = 'ticket' %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <section class="well">
                <h3>Statistiques</h3>
                <div class="row">
                    <div class="col-md-3">
                        <div class="page-header">
                            <h1>{{ totalTicket }} <small>ticket(s)</small></h1>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <canvas id="totalChart" width="160" height="160"></canvas>
                    </div>
                    <div class="col-md-offset-1 col-md-4">
                         <div class="row">
                             <div class="col-md-12"><h5><b>Légende : </b></h5></div>
                         </div>
                            <ul>
                                <li>Type 1</li>
                                <li>Type 2</li>
                                <li>Type 3</li>
                                <li>Type 4</li>
                            </ul>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <section class="well">
                <h3><b>Derniers tickets</b></h3>
                <div class="row">
                    <div class="col-md-offset-8 col-md-4">
                        <a class="btn btn-lg btn-block btn-primary" href="{{ domain() }}tickets/create"> Ouvrir un ticket </a>
                        <br />
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="table-responsive">
                    <table class="table table-hover table-striped">
                        <tr>
                            <th style="width: 80px;"># Ticket</th>
                            <th>Titre</th>
                            <th>Auteur</th>
                            <th>Satus</th>
                            <th>Assigné à </th>
                            <th style="width: 40px;">Actions</th>
                        </tr>
                        {% for ticket in ticketList %}
                        <tr>
                            <td><a href="{{ domain() }}tickets/{{ ticket.idTicket }}/show">#{{ ticket.idTicket }}</a></td>
                            <td><a href="{{ domain() }}tickets/{{ ticket.idTicket }}/show">{{ ticket.title }}</a></td>
                            <td><a href="{{ domain() }}tickets/{{ ticket.idTicket }}/show">{{ [ticket.lastname|capitalize, ticket.firstname|capitalize]|join(' ') }}</a></td>
                            <td><a href="{{ domain() }}tickets/{{ ticket.idTicket }}/show">{{ ticket.statusLabel}}</a></td>
                            <td><a href="{{ domain() }}tickets/{{ ticket.idTicket }}/show">{{ [ticket.assignedToFirstname|capitalize, ticket.assignedToLastname|capitalize]|join(' ') }}</a></td>
                            <td>
                                <a href="{{ domain() }}tickets/{{ ticket.idTicket }}/show"><i class="fa-eye"></i></a> 
                                <a href="{{ domain() }}tickets/{{ ticket.idTicket }}/edit"><i class="fa-edit"></i></a>
                                <a href="{{ domain() }}tickets/{{ ticket.idTicket }}/delete"><i class="fa-times"></i></a>
                            </td>
                        </tr>
                        {% else %}
                        <div class="alert alert-warning">Aucun existant</div>
                        {% endfor %}
                    </table>
                </div>
                <ul class="pager">
                    <li class="previous disabled"><a href="#">«</a></li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li class="next"><a href="#">»</a></li>
                </ul>
            </section>
        </div>
    </div>
</div>
{% endblock %}
{% block pagescripts %}
<script src="{{ domain() }}asset/js/Chart.min.js"></script>
<script src="{{ domain() }}asset/js/worker-ticket-stats.js"></script>
{% endblock %}